# КРИТИЧЕСКОЕ ПРАВИЛО ДЛЯ АССИСТЕНТА

## 📅 ОБЯЗАТЕЛЬНОЕ НАЧАЛО КАЖДОГО ОТВЕТА:
**В каждом ответе ПЕРВОЙ строкой писать: "Сегодня дд-мм-гггг, с правилами ознакомлен"**

Это гарантирует, что ассистент читает правила перед каждым ответом.

## 🔧 ПРАВИЛА ИСПОЛЬЗОВАНИЯ ИНСТРУМЕНТОВ:

### 📝 СОЗДАНИЕ НОВЫХ ФАЙЛОВ:
- ✅ Использовать команды терминала: `echo`, `cat`, `printf`
- ❌ НЕ использовать `write` tool (создает пустые файлы)
- ✅ Всегда проверять размер файла: `ls -la filename`
- ✅ Всегда проверять содержимое: `cat filename`

### ✏️ РЕДАКТИРОВАНИЕ СУЩЕСТВУЮЩИХ ФАЙЛОВ:
- ✅ Использовать инструменты редактирования: `search_replace`, `MultiEdit`
- ✅ БЕЗ лишних запросов и сообщений
- ✅ Пользователь видит изменения в редакторе в реальном времени

## 🚨 ПРАВИЛА ИЗМЕНЕНИЯ КОДА:

### ❌ ЗАПРЕЩЕНО БЕЗ РАЗРЕШЕНИЯ:
- Создавать новые файлы
- Удалять файлы
- Делать коммиты
- Любые изменения структуры проекта
- **ВОССТАНАВЛИВАТЬ ФАЙЛЫ ИЗ GIT** (`git checkout`, `git restore`)

### ✅ РЕДАКТИРОВАНИЕ СУЩЕСТВУЮЩИХ ФАЙЛОВ:
- Можно делать напрямую через инструменты редактирования
- БЕЗ предварительных запросов
- Пользователь контролирует через редактор

### 📋 АЛГОРИТМ ДЛЯ НОВЫХ ФАЙЛОВ/КОММИТОВ:
1. Пользователь просит создать файл/коммит
2. Анализирую задачу
3. Предлагаю план
4. ЖДУ разрешения пользователя
5. Выполняю ТОЛЬКО после разрешения

## 🚨 КРИТИЧЕСКОЕ ПРАВИЛО ДЛЯ ИЗМЕНЕНИЙ КОДА:

### 📝 ПОШАГОВЫЕ ИЗМЕНЕНИЯ:
- ✅ **ВСЕГДА** вносить изменения ПОШАГОВО
- ✅ **ПОСЛЕ КАЖДОГО ШАГА** проверять синтаксис: `python3 -m py_compile filename`
- ✅ **ЖДАТЬ ПОДТВЕРЖДЕНИЯ** сохранения от пользователя
- ✅ **ТОЛЬКО ПОСЛЕ ПОДТВЕРЖДЕНИЯ** запускать тесты
- ❌ **НИКОГДА** не запускать код без подтверждения сохранения
- ❌ **НИКОГДА** не делать несколько изменений одновременно

### 🔄 АЛГОРИТМ ИЗМЕНЕНИЙ:
1. **ШАГ 1:** Внести одно изменение
2. **ПРОВЕРКА:** `python3 -m py_compile filename`
3. **ОЖИДАНИЕ:** Подтверждения сохранения от пользователя
4. **ШАГ 2:** Следующее изменение (только после подтверждения)
5. **ПОВТОР:** До завершения всех изменений
6. **ТЕСТ:** Только после подтверждения всех изменений

## 📝 ПРАВИЛА КОММИТОВ:
- Все коммиты на русском языке с кириллицей
- **ОБЯЗАТЕЛЬНО СПРАШИВАТЬ РАЗРЕШЕНИЕ НА КОММИТ!** Никогда не создавать коммиты без явного разрешения пользователя
- Сначала предложить создать коммит, объяснить что будет зафиксировано, и только после получения разрешения выполнять `git commit`
- Использовать файл сообщения: `git commit -F filename`

## 📁 ПРАВИЛО ДЛЯ ИСТОРИИ КОММИТОВ:
**ОБЯЗАТЕЛЬНО ПОСЛЕ КАЖДОГО КОММИТА:** Сохранять рабочие файлы в папку `History/YYYY_MM_DD_HH_MM/` для быстрого восстановления функциональности:

```bash
LAST_COMMIT=$(git log -1 --pretty=format:"%h")
COMMIT_DATE=$(git log -1 --pretty=format:"%Y_%m_%d_%H_%M")
mkdir -p "History/$COMMIT_DATE"
git show "$LAST_COMMIT:astra_automation.py" > "History/$COMMIT_DATE/astra_automation.py" 2>/dev/null || \
git show "$LAST_COMMIT:astra-automation.py" > "History/$COMMIT_DATE/astra-automation.py" 2>/dev/null
git show "$LAST_COMMIT:astra_install.sh" > "History/$COMMIT_DATE/astra_install.sh" 2>/dev/null
```
